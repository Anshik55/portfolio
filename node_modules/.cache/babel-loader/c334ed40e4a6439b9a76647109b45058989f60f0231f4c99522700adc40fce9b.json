{"ast":null,"code":"var _jsxFileName = \"/home/anshik.thakur@id.argusoft.com/Desktop/portfolio/src/components/Game/GameCanvas.jsx\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect, useState } from 'react';\nimport { Player } from './Player';\nimport { World } from './World';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GameCanvas = ({\n  onZoneEnter,\n  onZoneExit\n}) => {\n  _s();\n  const canvasRef = useRef(null);\n  const [input, setInput] = useState({\n    keys: {}\n  });\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n\n    // Set canvas to full screen\n    canvas.width = window.innerWidth;\n    canvas.height = window.innerHeight;\n    const world = new World(canvas.width, canvas.height);\n    const player = new Player(canvas.width / 2, canvas.height / 2, 30, 5);\n    let animationFrameId;\n    const handleKeyDown = e => {\n      setInput(prev => ({\n        keys: {\n          ...prev.keys,\n          [e.key]: true\n        }\n      }));\n    };\n    const handleKeyUp = e => {\n      setInput(prev => ({\n        keys: {\n          ...prev.keys,\n          [e.key]: false\n        }\n      }));\n    };\n    window.addEventListener('keydown', handleKeyDown);\n    window.addEventListener('keyup', handleKeyUp);\n    let currentZone = null;\n    const render = () => {\n      var _currentZone;\n      // Clear canvas\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      ctx.shadowBlur = 0; // Reset shadow for world\n\n      // Draw World\n      world.draw(ctx);\n\n      // Update and Draw Player\n      player.update(input, world);\n      player.draw(ctx);\n\n      // Check Collisions\n      const zone = world.checkCollision(player);\n      if (zone && zone.id !== ((_currentZone = currentZone) === null || _currentZone === void 0 ? void 0 : _currentZone.id)) {\n        currentZone = zone;\n        onZoneEnter(zone.id);\n      } else if (!zone && currentZone) {\n        currentZone = null;\n        onZoneExit();\n      }\n      animationFrameId = window.requestAnimationFrame(render);\n    };\n    render();\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n      window.removeEventListener('keyup', handleKeyUp);\n      window.cancelAnimationFrame(animationFrameId);\n    };\n  }, [input, onZoneEnter, onZoneExit]);\n  return /*#__PURE__*/_jsxDEV(\"canvas\", {\n    ref: canvasRef,\n    style: {\n      display: 'block'\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 10\n  }, this);\n};\n_s(GameCanvas, \"KCRgHIT5dzNhkkmN1hNhqwzRHJ0=\");\n_c = GameCanvas;\nexport default GameCanvas;\nvar _c;\n$RefreshReg$(_c, \"GameCanvas\");","map":{"version":3,"names":["React","useRef","useEffect","useState","Player","World","jsxDEV","_jsxDEV","GameCanvas","onZoneEnter","onZoneExit","_s","canvasRef","input","setInput","keys","canvas","current","ctx","getContext","width","window","innerWidth","height","innerHeight","world","player","animationFrameId","handleKeyDown","e","prev","key","handleKeyUp","addEventListener","currentZone","render","_currentZone","clearRect","shadowBlur","draw","update","zone","checkCollision","id","requestAnimationFrame","removeEventListener","cancelAnimationFrame","ref","style","display","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/anshik.thakur@id.argusoft.com/Desktop/portfolio/src/components/Game/GameCanvas.jsx"],"sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\nimport { Player } from './Player';\nimport { World } from './World';\n\nconst GameCanvas = ({ onZoneEnter, onZoneExit }) => {\n  const canvasRef = useRef(null);\n  const [input, setInput] = useState({ keys: {} });\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    \n    // Set canvas to full screen\n    canvas.width = window.innerWidth;\n    canvas.height = window.innerHeight;\n\n    const world = new World(canvas.width, canvas.height);\n    const player = new Player(canvas.width / 2, canvas.height / 2, 30, 5);\n    \n    let animationFrameId;\n\n    const handleKeyDown = (e) => {\n      setInput(prev => ({ keys: { ...prev.keys, [e.key]: true } }));\n    };\n\n    const handleKeyUp = (e) => {\n      setInput(prev => ({ keys: { ...prev.keys, [e.key]: false } }));\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    window.addEventListener('keyup', handleKeyUp);\n\n    let currentZone = null;\n\n    const render = () => {\n      // Clear canvas\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      ctx.shadowBlur = 0; // Reset shadow for world\n\n      // Draw World\n      world.draw(ctx);\n\n      // Update and Draw Player\n      player.update(input, world);\n      player.draw(ctx);\n\n      // Check Collisions\n      const zone = world.checkCollision(player);\n      if (zone && zone.id !== currentZone?.id) {\n        currentZone = zone;\n        onZoneEnter(zone.id);\n      } else if (!zone && currentZone) {\n        currentZone = null;\n        onZoneExit();\n      }\n\n      animationFrameId = window.requestAnimationFrame(render);\n    };\n\n    render();\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n      window.removeEventListener('keyup', handleKeyUp);\n      window.cancelAnimationFrame(animationFrameId);\n    };\n  }, [input, onZoneEnter, onZoneExit]);\n\n  return <canvas ref={canvasRef} style={{ display: 'block' }} />;\n};\n\nexport default GameCanvas;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,MAAM,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC1D,SAASC,MAAM,QAAQ,UAAU;AACjC,SAASC,KAAK,QAAQ,SAAS;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEhC,MAAMC,UAAU,GAAGA,CAAC;EAAEC,WAAW;EAAEC;AAAW,CAAC,KAAK;EAAAC,EAAA;EAClD,MAAMC,SAAS,GAAGX,MAAM,CAAC,IAAI,CAAC;EAC9B,MAAM,CAACY,KAAK,EAAEC,QAAQ,CAAC,GAAGX,QAAQ,CAAC;IAAEY,IAAI,EAAE,CAAC;EAAE,CAAC,CAAC;EAEhDb,SAAS,CAAC,MAAM;IACd,MAAMc,MAAM,GAAGJ,SAAS,CAACK,OAAO;IAChC,MAAMC,GAAG,GAAGF,MAAM,CAACG,UAAU,CAAC,IAAI,CAAC;;IAEnC;IACAH,MAAM,CAACI,KAAK,GAAGC,MAAM,CAACC,UAAU;IAChCN,MAAM,CAACO,MAAM,GAAGF,MAAM,CAACG,WAAW;IAElC,MAAMC,KAAK,GAAG,IAAIpB,KAAK,CAACW,MAAM,CAACI,KAAK,EAAEJ,MAAM,CAACO,MAAM,CAAC;IACpD,MAAMG,MAAM,GAAG,IAAItB,MAAM,CAACY,MAAM,CAACI,KAAK,GAAG,CAAC,EAAEJ,MAAM,CAACO,MAAM,GAAG,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;IAErE,IAAII,gBAAgB;IAEpB,MAAMC,aAAa,GAAIC,CAAC,IAAK;MAC3Bf,QAAQ,CAACgB,IAAI,KAAK;QAAEf,IAAI,EAAE;UAAE,GAAGe,IAAI,CAACf,IAAI;UAAE,CAACc,CAAC,CAACE,GAAG,GAAG;QAAK;MAAE,CAAC,CAAC,CAAC;IAC/D,CAAC;IAED,MAAMC,WAAW,GAAIH,CAAC,IAAK;MACzBf,QAAQ,CAACgB,IAAI,KAAK;QAAEf,IAAI,EAAE;UAAE,GAAGe,IAAI,CAACf,IAAI;UAAE,CAACc,CAAC,CAACE,GAAG,GAAG;QAAM;MAAE,CAAC,CAAC,CAAC;IAChE,CAAC;IAEDV,MAAM,CAACY,gBAAgB,CAAC,SAAS,EAAEL,aAAa,CAAC;IACjDP,MAAM,CAACY,gBAAgB,CAAC,OAAO,EAAED,WAAW,CAAC;IAE7C,IAAIE,WAAW,GAAG,IAAI;IAEtB,MAAMC,MAAM,GAAGA,CAAA,KAAM;MAAA,IAAAC,YAAA;MACnB;MACAlB,GAAG,CAACmB,SAAS,CAAC,CAAC,EAAE,CAAC,EAAErB,MAAM,CAACI,KAAK,EAAEJ,MAAM,CAACO,MAAM,CAAC;MAChDL,GAAG,CAACoB,UAAU,GAAG,CAAC,CAAC,CAAC;;MAEpB;MACAb,KAAK,CAACc,IAAI,CAACrB,GAAG,CAAC;;MAEf;MACAQ,MAAM,CAACc,MAAM,CAAC3B,KAAK,EAAEY,KAAK,CAAC;MAC3BC,MAAM,CAACa,IAAI,CAACrB,GAAG,CAAC;;MAEhB;MACA,MAAMuB,IAAI,GAAGhB,KAAK,CAACiB,cAAc,CAAChB,MAAM,CAAC;MACzC,IAAIe,IAAI,IAAIA,IAAI,CAACE,EAAE,OAAAP,YAAA,GAAKF,WAAW,cAAAE,YAAA,uBAAXA,YAAA,CAAaO,EAAE,GAAE;QACvCT,WAAW,GAAGO,IAAI;QAClBhC,WAAW,CAACgC,IAAI,CAACE,EAAE,CAAC;MACtB,CAAC,MAAM,IAAI,CAACF,IAAI,IAAIP,WAAW,EAAE;QAC/BA,WAAW,GAAG,IAAI;QAClBxB,UAAU,CAAC,CAAC;MACd;MAEAiB,gBAAgB,GAAGN,MAAM,CAACuB,qBAAqB,CAACT,MAAM,CAAC;IACzD,CAAC;IAEDA,MAAM,CAAC,CAAC;IAER,OAAO,MAAM;MACXd,MAAM,CAACwB,mBAAmB,CAAC,SAAS,EAAEjB,aAAa,CAAC;MACpDP,MAAM,CAACwB,mBAAmB,CAAC,OAAO,EAAEb,WAAW,CAAC;MAChDX,MAAM,CAACyB,oBAAoB,CAACnB,gBAAgB,CAAC;IAC/C,CAAC;EACH,CAAC,EAAE,CAACd,KAAK,EAAEJ,WAAW,EAAEC,UAAU,CAAC,CAAC;EAEpC,oBAAOH,OAAA;IAAQwC,GAAG,EAAEnC,SAAU;IAACoC,KAAK,EAAE;MAAEC,OAAO,EAAE;IAAQ;EAAE;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC;AAChE,CAAC;AAAC1C,EAAA,CAjEIH,UAAU;AAAA8C,EAAA,GAAV9C,UAAU;AAmEhB,eAAeA,UAAU;AAAC,IAAA8C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}